(window.webpackJsonpOrderingUI=window.webpackJsonpOrderingUI||[]).push([[32],{563:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LoginForm=void 0;var o=d(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=d(n(3)),l=d(n(83)),i=n(26),c=n(16),s=n(75);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o,a,u){try{var l=e[a](u),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){g(a,r,o,u,l,"next",e)}function l(e){g(a,r,o,u,l,"throw",e)}u(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(r=(u=l.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.UIComponent,n=e.handleButtonLoginClick,r=e.handleSuccessLogin,u=e.useLoginByEmail,f=e.useLoginByCellphone,d=e.useDefualtSessionManager,y=e.urlToRedirect,g=e.allowedLevels,O=e.handleCustomLogin,w=h((0,c.useApi)(),1)[0],S=e.defaultLoginTab,j=h((0,a.useState)({loading:!1,result:{error:!1}}),2),k=j[0],P=j[1],C=h((0,a.useState)({email:"",cellphone:"",password:""}),2),L=C[0],_=C[1],x=h((0,a.useState)({loading:!1,result:{error:!1}}),2),T=x[0],E=x[1],A=h((0,a.useState)({loading:!1,result:{error:!1}}),2),D=A[0],M=A[1],I=h((0,s.useEvent)(),1)[0];u||f?"email"===S&&!u&&f?S="cellphone":"cellphone"===S&&!f&&u&&(S="email"):S="none";var B=h((0,a.useState)(S||(f&&!u?"cellphone":"email")),2),U=B[0],N=B[1],F=h((0,i.useSession)(),2)[1],J=F.login,W=F.logout,R=function(){var e=m(o.default.mark((function e(t){var n,a,u,i,c,s,f,p,m,h,S,j,C,_;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=3;break}return O(t||L,U),e.abrupt("return");case 3:return e.prev=3,b(n={},U,t&&t[U]||L[U]),b(n,"password",t&&(null==t?void 0:t.password)||L.password),u=n,P(v(v({},k),{},{loading:!0})),(null==u||null===(a=u.cellphone)||void 0===a?void 0:a.includes("+"))&&(i=(0,l.default)(u.cellphone),c=null==i?void 0:i.nationalNumber,u.cellphone=c),e.next=9,w.users().auth(u);case 9:if(s=e.sent,f=s.content,p=f.error,m=f.result,p){e.next=36;break}if(!d){e.next=33;break}if(!(g&&(null==g?void 0:g.length)>0)){e.next=32;break}if(S=m.level,j=m.session,C=null==j?void 0:j.access_token,g.includes(S)){e.next=32;break}return e.prev=19,e.next=22,w.setAccessToken(C).users().logout();case 22:_=e.sent,_.content.error||W(),P({result:{error:!0,result:["YOU_DO_NOT_HAVE_PERMISSION"]},loading:!1}),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(19),P({result:{error:!0,result:e.t0.message},loading:!1});case 31:return e.abrupt("return");case 32:J({user:m,token:null===(h=m.session)||void 0===h?void 0:h.access_token});case 33:I.emit("userLogin",m),r&&r(m),y&&(window.location.href="".concat(window.location.origin).concat(y));case 36:P({result:{error:p,result:m},loading:!1}),e.next=42;break;case 39:e.prev=39,e.t1=e.catch(3),P({result:{error:!0,result:e.t1.message},loading:!1});case 42:case"end":return e.stop()}}),e,null,[[3,39],[19,28]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=m(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(v(v({},T),{},{loading:!0})),e.next=4,fetch("".concat(w.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,E(v(v({},T),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),E(v(v({},T),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=m(o.default.mark((function e(t){var n,a,u,l,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(v(v({},D),{},{loading:!0})),e.next=4,fetch("".concat(w.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:!(null==(u=e.sent)?void 0:u.error)&&(null==u||null===(n=u.result)||void 0===n?void 0:n.id)&&(J({user:null==u?void 0:u.result,token:null==u||null===(l=u.result)||void 0===l||null===(i=l.session)||void 0===i?void 0:i.access_token}),r&&r(null==u?void 0:u.result)),M(v(v({},D),{},{loading:!1,result:u})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),M(v(v({},D),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,p({},e,{formState:k,loginTab:U,credentials:L,verifyPhoneState:T,checkPhoneCodeState:D,setCheckPhoneCodeState:function(e){M(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e){_(v(v({},L),{},b({},e.target.name,e.target.value)))},handleButtonLoginClick:n||R,handleChangeTab:function(e){N(e)},handleSendVerifyCode:V,handleCheckPhoneCode:$})))};t.LoginForm=w,w.propTypes={UIComponent:u.default.elementType,handleButtonLoginClick:u.default.func,handleSuccessLogin:u.default.func,useDefualtSessionManager:u.default.bool,useLoginByEmail:u.default.bool,useLoginByCellphone:u.default.bool,defaultLoginTab:u.default.string,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element),linkToSignup:u.default.string,linkToForgetPassword:u.default.string,elementLinkToSignup:u.default.element,elementLinkToForgotPassword:u.default.element},w.defaultProps={defaultLoginTab:"email",useLoginByEmail:!0,useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var S=w;t.default=S},564:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LogoutAction=void 0;var o=f(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=f(n(3)),l=n(26),i=n(16),c=n(55);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n,r,o,a,u){try{var l=e[a](u),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,o)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(r=(u=l.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t,n=e.UIComponent,r=e.handleSuccessLogout,u=e.token,s=e.isNative,f=e.useDefualtSessionManager,p=e.handleCustomLogoutClick,v=g((0,i.useApi)(),1)[0],m=g((0,a.useState)({loading:!1,result:{error:!1}}),2),h=m[0],O=m[1],w=g((0,l.useSession)(),2),S=w[0],j=w[1].logout,k=g((0,c.useConfig)(),1)[0].configs;(0,a.useEffect)((function(){var e;if((null==k||null===(e=k.facebook_id)||void 0===e?void 0:e.value)&&!s){if(window.fbAsyncInit=function(){var e;window.FB.init({appId:null==k||null===(e=k.facebook_id)||void 0===e?void 0:e.value,cookie:!0,xfbml:!1,version:"v7.0",status:!0})},window.document.getElementById("facebook-jssdk"))return;var t=window.document.createElement("script"),n=window.document.getElementsByTagName("script")[0];t.id="facebook-jssdk",t.async=!0,t.defer=!0,t.src="https://connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(t,n)}}),[null==k||null===(t=k.facebook_id)||void 0===t?void 0:t.value]);var P=function(){var e,t=(e=o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p&&p&&p(),e.prev=1,O(y(y({},h),{},{loading:!0})),t=u||S.token,e.next=6,v.setAccessToken(t).users().logout();case 6:n=e.sent,O({result:n.content,loading:!1}),n.content.error||(f&&j(),r&&r()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),O({result:{error:!0,result:e.t0.message},loading:!1});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){b(a,r,o,u,l,"next",e)}function l(e){b(a,r,o,u,l,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,n&&a.default.createElement(n,d({},e,{formState:h,handleLogoutClick:P})))};t.LogoutAction=h,h.propTypes={UIComponent:u.default.elementType,handleSuccessLogout:u.default.func,handleErrorLogout:u.default.func,token:u.default.string,useDefualtSessionManager:u.default.bool,handleCustomLogoutClick:u.default.func},h.defaultProps={useDefualtSessionManager:!0};var O=h;t.default=O}}]);