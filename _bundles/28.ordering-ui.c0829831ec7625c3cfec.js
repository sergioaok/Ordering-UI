(window.webpackJsonpOrderingUI=window.webpackJsonpOrderingUI||[]).push([[28],{289:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentOptionPaypal=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(290)),i=c(r(3)),l=r(27);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){d(a,n,o,u,i,"next",e)}function i(e){d(a,n,o,u,i,"throw",e)}u(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t,r,n,i=e.body,f=e.clientId,c=e.btnStyle,d=e.UIComponent,m=e.handlerChangePaypal,v=y((0,l.useOrder)(),2)[1],b=v.confirmCart,h=v.placeCart,g=y((0,a.useState)(!1),2),O=g[0],j=g[1];(0,a.useEffect)((function(){var e;if(f){if(!(null===(e=window)||void 0===e?void 0:e.paypal)){var t=document.createElement("script");return t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id=".concat(f),t.async=!0,t.onload=function(){j(!0)},t.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(t),function(){t.onload=null}}j(!0)}}),[f]);var w=function(){var e=p(o.default.mark((function e(t,r){var n,a,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={paymethod_id:i.paymethod_id,amount:i.amount,delivery_zone_id:i.delivery_zone_id},e.next=3,h(i.cartUuid,n);case 3:if(a=e.sent,u=a.error,l=a.result,!u){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",l.pay_reference);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),S=function(){var e=p(o.default.mark((function e(t,r){var n,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(i.cartUuid);case 2:if(n=e.sent,a=n.error,u=n.result,!a){e.next=7;break}return e.abrupt("return",null);case 7:return m&&m(u.order.uuid),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=p(o.default.mark((function e(t){var r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(i.cartUuid);case 2:return r=e.sent,n=r.result,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=null===(t=window)||void 0===t||null===(r=t.paypal)||void 0===r||null===(n=r.Buttons)||void 0===n?void 0:n.driver("react",{React:a.default,ReactDOM:u.default});return d&&a.default.createElement(d,s({},e,{isSdkReady:O,PaypalButton:E,paypalButtonProps:{createOrder:w,onApprove:S,onError:P,onCancel:P,style:c}}))};t.PaymentOptionPaypal=v,v.propTypes={UIComponent:i.default.elementType,body:i.default.object.isRequired,clientId:i.default.string.isRequired,handlerChangePaypal:i.default.func,beforeComponents:i.default.arrayOf(i.default.elementType),afterComponents:i.default.arrayOf(i.default.elementType),beforeElements:i.default.arrayOf(i.default.element),afterElements:i.default.arrayOf(i.default.element)},v.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var b=v;t.default=b},565:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MainSearch=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(27),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t,r=e.searchByAddress,n=e.handlerFindBusiness,u=e.UIComponent,f=v((0,l.useApi)(),1)[0],c=v((0,i.useOrder)(),1)[0],d=v((0,a.useState)({countries:[],cities:[],citiesOptions:[]}),2),y=d[0],b=d[1],h=v((0,a.useState)({cityId:null,dropdownOptionId:null,orderType:(null===(t=c.options)||void 0===t?void 0:t.type)||1}),2),g=h[0],O=h[1],j=v((0,a.useState)(!1),2),w=j[0],S=j[1],P=function(){var e,t=(e=o.default.mark((function e(){var t,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.countries().get();case 3:r=e.sent,n=r.response,b(p(p({},y),{},{countries:null==n||null===(t=n.data)||void 0===t?void 0:t.result})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){m(a,n,o,u,i,"next",e)}function i(e){m(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,a.useEffect)((function(){r||P()}),[]),a.default.createElement(a.default.Fragment,null,u&&a.default.createElement(u,s({},e,{orderState:c,allListValues:y,currentValues:g,isFormErrors:w,handleChangeValue:function(e){var t=e.name,r=e.value;switch(t){case"country":var n=null==y?void 0:y.countries.find((function(e){return Number(e.id)===Number(r)})),o=null==n?void 0:n.cities.filter((function(e){return e.options.length}));b(p(p({},y),{},{cities:o})),O(p(p({},g),{},{cityId:null}));break;case"cityId":var a=y.cities.find((function(e){return Number(e.id)===Number(r)}));b(p(p({},y),{},{citiesOptions:null==a?void 0:a.options})),O(p(p({},g),{},{cityId:r,dropdownOptionId:null}));break;case"dropdownOptionId":O(p(p({},g),{},{dropdownOptionId:r}))}},handleFindBusiness:function(){var e=!(y.citiesOptions.length>0)||!!g.dropdownOptionId,t=g.cityId&&e;t&&n(g),S(!t)}})))};t.MainSearch=h,h.propTypes={UIComponent:u.default.elementType,searchByAddress:u.default.bool,handlerFindBusiness:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},h.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var g=h;t.default=g},566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuControl=void 0;var n,o=y(r(0)),a=(n=r(3))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var m=(0,o.lazy)((function(){return Promise.resolve().then((function(){return y(r(76))}))})),v=function(e){var t,r=e.maxPreoderDays,n=e.UIComponent,a=s((0,o.useState)(null),2),u=a[0],l=a[1],c=s((0,o.useState)(null),2),d=c[0],p=c[1],y=s((0,o.useState)(null),2),v=y[0],b=y[1],h=s((0,o.useState)(null),2),g=h[0],O=h[1],j=s((0,o.useState)([]),2)[1],w=(null==d||null===(t=d.schedule)||void 0===t?void 0:t.map((function(e,t){return!e.enabled&&t})))||[],S=function(){var e=r,t=m().toDate(),n=[],o=w.every((function(e){return!1===e}));if(w.length&&!o)for(;e>0;){var a=t,u=m(t).day();!1===w[u]&&(n.push(m(a).toDate()),e--),t=m(m(t).add(1,"d")).toDate()}if(w.length&&o)for(var i=1;i<=r;i++)n.push(m(m(t).add(i,"d")).toDate());return n.unshift(m().toDate()),n};return(0,o.useEffect)((function(){S()}),[w]),(0,o.useEffect)((function(){!function(){for(var e=[],t=m().format("YYYY-MM-DD"),r=m().day(30).format("YYYY-MM-DD"),n=m(r,"YYYY-MM-DD HH:mm").diff(m(t,"YYYY-MM-DD HH:mm"),"days"),o=0;o<=n;o++)e.push({key:"".concat(o),date:m(t).add(o,"d").format("YYYY-MM-DD")});j(e)}()}),[]),o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null,"Loading...")},n&&o.default.createElement(n,i({},e,{futureDaysToShow:S,menuLapsesList:function(){for(var e=[],t=(null==u?void 0:u.lapses)||[],r=0;r<t.length;r++)for(var n,o,a,i,l,f,c,s,d="".concat(null===(n=t[r])||void 0===n||null===(o=n.open)||void 0===o?void 0:o.hour,":").concat(null===(a=t[r])||void 0===a||null===(i=a.open)||void 0===i?void 0:i.minute),p="".concat(null===(l=t[r])||void 0===l||null===(f=l.close)||void 0===f?void 0:f.hour,":").concat(null===(c=t[r])||void 0===c||null===(s=c.close)||void 0===s?void 0:s.minute),y=m(p,"HH:mm").diff(m(d,"HH:mm"),"hour",!0);y>0;){var v=d;e.push(m(v,"HH:mm").toDate()),d=m(v,"HH:mm").add(15,"minutes"),y-=.25}return e},disableDays:w,startDate:g,isDisabledDay:function(e){var t=m(e,"YYYY-MM-DD").day();return w.every((function(e){return e!==t}))},scheduleSelected:u,menuSelected:null==d?void 0:d.id,handleMenuSelected:function(e){return l(function(e){var t;p(e);var r=m().day();return{lapses:null==e||null===(t=e.schedule[r])||void 0===t?void 0:t.lapses,menuId:e.id}}(e))},handleDate:function(t){var r,n=m(t,"YYYY-MM-DD").day(),o=null==d||null===(r=d.schedule[n])||void 0===r?void 0:r.lapses;l(f(f({},u),{},{lapses:o})),O(t),b(m(t).format("YYYY-MM-DD HH:mm")),e.handlerSelectDate(m(t).format("YYYY-MM-DD HH:mm"))},onSendMenuInfo:function(){(null==u?void 0:u.menuId)&&v&&e.handleMenuInfo({menuId:null==u?void 0:u.menuId,date:new Date(v)})},dateSelected:v})))};t.MenuControl=v,v.propTypes={UIComponent:a.default.elementType,maxPreoderDays:a.default.number,business:a.default.object,handleMenuInfo:a.default.func,handlerSelectDate:a.default.func,beforeComponents:a.default.arrayOf(a.default.elementType),afterComponents:a.default.arrayOf(a.default.elementType),beforeElements:a.default.arrayOf(a.default.element),afterElements:a.default.arrayOf(a.default.element)},v.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var b=v;t.default=b},567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MomentOption=void 0;var n=p(r(0)),o=i(r(3)),a=i(r(568)),u=r(27);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var y=(0,n.lazy)((function(){return Promise.resolve().then((function(){return p(r(76))}))})),m=(0,n.lazy)((function(){return Promise.resolve().then((function(){return p(r(81))}))}));y.extend(a.default),y.extend(m);var v=function(e){var t,r,o=e.minDate,a=e.maxDate,i=e.currentDate,l=e.useOrderContext,s=e.onChangeMoment,d=e.UIComponent,p=c((0,u.useOrder)(),2),m=p[0],v=p[1].changeMoment,b=function(e){if(e)return y(e,"YYYY-MM-DD HH:mm").isSameOrAfter(y(),"day")?y(e).format("YYYY-MM-DD HH:mm"):y().format("YYYY-MM-DD HH:mm")},h=l?null===(t=m.options)||void 0===t?void 0:t.moment:i,g=c((0,n.useState)(h?y(b(h)).format("YYYY-MM-DD HH:mm"):null),2),O=g[0],j=g[1],w=c((0,n.useState)(!O),2),S=w[0],P=w[1],E=c((0,n.useState)([]),2),C=E[0],M=E[1],D=c((0,n.useState)([]),2),_=D[0],T=D[1],k=c((0,n.useState)(y(b(h)).format("YYYY-MM-DD")),2),A=k[0],I=k[1],x=c((0,n.useState)(null),2),Y=x[0],U=x[1],H=function(){S||(P(!0),l&&v(null),s&&s(null))};(0,n.useEffect)((function(){var e;if(l)if(null===(e=m.options)||void 0===e?void 0:e.moment){var t,r=y.utc(b(null===(t=m.options)||void 0===t?void 0:t.moment)).local();j(r.format("YYYY-MM-DD HH:mm")),I(r.format("YYYY-MM-DD")),U(r.format("HH:mm")),S&&P(!1)}else A!==y().format("YYYY-MM-DD")&&I(y().format("YYYY-MM-DD")),null!==Y&&U(null),null!==O&&j(null),!S&&P(!0);else null!==O&&j(null),!S&&P(!0)}),[null===(r=m.options)||void 0===r?void 0:r.moment]),(0,n.useEffect)((function(){if(O){var e,t=y(O,"YYYY-MM-DD HH:mm"),r=y(),n=t.diff(r,"seconds");if(!(n<=0))return 1e3*n<36e3&&(e=setTimeout((function(){H()}),1e3*n)),function(){"number"==typeof e&&clearTimeout(e)};H()}}),[O]),(0,n.useEffect)((function(){S&&_[0]&&(I(_[0]),U(null))}),[S,_]);var R=function(){for(var e=[],t=A===y().format("YYYY-MM-DD"),r=A===y(a).format("YYYY-MM-DD"),n=new Date,o=0;o<24;o++)if(!(t&&o<(null==n?void 0:n.getHours())||r&&o>(null==a?void 0:a.getHours())))for(var u=0;u<59;u+=15)if(!(t&&o===(null==n?void 0:n.getHours())&&u<=n.getMinutes()||r&&o===(null==a?void 0:a.getHours())&&u>a.getMinutes())){var i=o<10?"0".concat(o):o,l=u<10?"0".concat(u):u,f=u+14<10?"0".concat(u+14):u+14,c="".concat(i,":").concat(l),s="".concat(i,":").concat(f);e.push({startTime:c,endTime:s})}M(e)},W=function(){for(var e,t,r,n=[],u=parseInt((e=b(a),r=null!=t?t:y(),y(e).diff(y(r),"day")),b(o)),i=0;i<u+1;i++)n.push(y(b(o)).add(i,"d").format("YYYY-MM-DD"));T(n)};return(0,n.useEffect)((function(){A&&R()}),[A]),(0,n.useEffect)((function(){var e=setInterval((function(){0===y(A).diff(y(i),"day")&&R()}),1e3);return function(){return clearInterval(e)}}),[A]),(0,n.useEffect)((function(){W()}),[a,o]),n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",null,"Loading...")},d&&n.default.createElement(d,f({},e,{isAsap:S,minDate:b(o),maxDate:b(a),dateSelected:A,timeSelected:Y,handleChangeDate:function(e){e&&e!==A&&(I(e),U(null),P(!1))},handleChangeTime:function(e){if(e&&e!==Y){var t=y("".concat(A," ").concat(e),"YYYY-MM-DD HH:mm").toDate();U(e),P(!1),l&&v(t),s&&s(t)}},datesList:_,hoursList:C,handleAsap:H})))};t.MomentOption=v,v.propTypes={UIComponent:o.default.elementType,minDate:o.default.instanceOf(Date),maxDate:o.default.instanceOf(Date).isRequired,currentDate:o.default.instanceOf(Date),useOrderContext:o.default.bool,onChangeMoment:o.default.func,beforeComponents:o.default.arrayOf(o.default.elementType),afterComponents:o.default.arrayOf(o.default.elementType),beforeElements:o.default.arrayOf(o.default.element),afterElements:o.default.arrayOf(o.default.element)},v.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var b=v;t.default=b},569:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MyOrders=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(26),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){m(a,n,o,u,i,"next",e)}function i(e){m(a,n,o,u,i,"throw",e)}u(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){var t=e.UIComponent,r=b((0,l.useApi)(),1)[0],n={},u=b((0,i.useSession)(),1)[0].token,f=b((0,a.useState)({loading:!0,orders:[],error:null}),2),c=f[0],d=f[1],y=b((0,a.useState)({loading:!0,orders:[],error:null}),2),m=y[0],h=y[1],g=function(){var e=v(o.default.mark((function e(){var t,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},n.activeOrders=t,e.next=5,r.setAccessToken(u).orders().where([{attribute:"status",value:[0,3,4,7,8,9]}]).get({cancelToken:t});case 5:a=e.sent,i=a.content.result,d(p(p({},c),{},{loading:!1,orders:i})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(p(p({},c),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=v(o.default.mark((function e(){var t,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},n.previousOrders=t,e.next=5,r.setAccessToken(u).orders().where([{attribute:"status",value:[1,2,5,6,10,11,12]}]).get({cancelToken:t});case 5:a=e.sent,i=a.content.result,h(p(p({},m),{},{loading:!1,orders:i})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),h(p(p({},m),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){return O(),g(),function(){n.previousOrders&&n.previousOrders.cancel(),n.activeOrders&&n.activeOrders.cancel()}}),[]),a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,s({},e,{activeOrders:c,previousOrders:m})))};t.MyOrders=g,g.propTypes={UIComponent:u.default.elementType,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},g.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var O=g;t.default=O},570:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MyOrdersList=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(26),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t=e.status,r=e.UIComponent,n=p((0,l.useApi)(),1)[0],u=p((0,i.useSession)(),1)[0].token,f=p((0,a.useState)([]),2),c=f[0],y=f[1],m={},v=function(){var e,r=(e=o.default.mark((function e(){var r,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},m.orders=r,e.next=5,n.setAccessToken(u).orders().where([{attribute:"status",value:t}]).get({cancelToken:r});case 5:a=e.sent,i=a.content.result,y(i),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){d(a,n,o,u,i,"next",e)}function i(e){d(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,a.useEffect)((function(){return v(),function(){m.orders&&m.orders.cancel()}}),[]),a.default.createElement(a.default.Fragment,null,r&&a.default.createElement(r,s({},e,{orders:c})))};t.MyOrdersList=m,m.propTypes={UIComponent:u.default.elementType,orderType:u.default.oneOf(["active","previous"]).isRequired,status:u.default.arrayOf(u.default.number).isRequired,orders:u.default.arrayOf(u.default.object),beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},m.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var v=m;t.default=v},571:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderList=void 0;var n,o=(n=r(9))&&n.__esModule?n:{default:n},a=s(r(0)),u=s(r(3)),i=r(26),l=r(16),f=r(112);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){h(a,n,o,u,i,"next",e)}function i(e){h(a,n,o,u,i,"throw",e)}u(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t,r=e.UIComponent,n=e.orders,u=e.orderIds,c=e.orderStatus,s=e.orderBy,d=e.orderDirection,m=e.useDefualtSessionManager,b=e.paginationSettings,h=e.asDashboard,j=e.customArray,w=e.userCustomerId,S=O((0,l.useApi)(),1)[0],P=O((0,a.useState)({loading:!n,error:null,orders:[]}),2),E=P[0],C=P[1],M=O((0,a.useState)({currentPage:"pages"===b.controlType&&b.initialPage&&b.initialPage>=1?b.initialPage-1:0,pageSize:null!==(t=b.pageSize)&&void 0!==t?t:10}),2),D=M[0],_=M[1],T=O((0,i.useSession)(),1)[0],k=(0,f.useWebsocket)(),A=m?T.token:e.accessToken,I={},x=function(){var e=g(o.default.mark((function e(t){var r,n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={query:{orderBy:("desc"===d?"-":"")+s,page:t,page_size:b.pageSize}},(u||c)&&(r.query.where=[],u&&r.query.where.push({attribute:"id",value:u}),c&&r.query.where.push({attribute:"status",value:c})),w&&r.query.where.push({attribute:"customer_id",value:parseInt(w,10)}),n={},I.orders=n,r.cancelToken=n,a=h?S.setAccessToken(A).orders().asDashboard():S.setAccessToken(A).orders(),e.next=9,a.get(r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=g(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.token){e.next=3;break}return C(v(v({},E),{},{loading:!1})),e.abrupt("return");case 3:return e.prev=3,C(v(v({},E),{},{loading:!0})),e.next=7,x(D.currentPage+1);case 7:t=e.sent,C({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||_({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),"Cancel"!==e.t0.constructor.name&&C(v(v({},E),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){return n||j?C(v(v({},E),{},{orders:(null==n?void 0:n.lenght)>0?n:j||[],loading:!1})):Y(),function(){I.orders&&I.orders.cancel()}}),[T]),(0,a.useEffect)((function(){if(!E.loading){var e=function(e){var t=[];E.orders.find((function(t){return t.id===e.id}))?t=E.orders.filter((function(t){t.id===e.id&&(delete e.total,delete e.subtotal,Object.assign(t,e));var r=0===c.length||c.includes(parseInt(t.status));return r||(D.total--,_(v({},D))),r})):(t=[].concat(y(E.orders),[e]),D.total++,_(v({},D))),C(v(v({},E),{},{orders:t}))};return k.on("update_order",e),function(){k.off("update_order",e)}}}),[E.orders,D,k]),(0,a.useEffect)((function(){var e;if(T.user)return k.join("orders_".concat(null==T||null===(e=T.user)||void 0===e?void 0:e.id)),function(){var e;k.leave("orders_".concat(null==T||null===(e=T.user)||void 0===e?void 0:e.id))}}),[k,T]);var U=function(){var e=g(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(v(v({},E),{},{loading:!0})),e.prev=1,e.next=4,x(D.currentPage+1);case 4:t=e.sent,C({loading:!1,orders:t.content.error?E.orders:E.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||_({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&C(v(v({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=g(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(v(v({},E),{},{loading:!0})),e.prev=1,e.next=4,x(t);case 4:r=e.sent,C({loading:!1,orders:r.content.error?[]:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||_({currentPage:r.content.pagination.current_page,pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&C(v(v({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,r&&a.default.createElement(r,p({},e,{orderList:E,pagination:D,loadMoreOrders:U,goToPage:H})))};t.OrderList=S,S.propTypes={UIComponent:u.default.elementType,onOrderClick:u.default.func,useDefualtSessionManager:u.default.bool,accessToken:function(e,t){return void 0!==e[t]&&"string"!=typeof e[t]?new Error("Invalid prop `".concat(t,"` of type `").concat(d(e[t]),"` supplied to `UserProfile`, expected `object`.")):void 0!==e[t]||e.useDefualtSessionManager?void 0:new Error("Invalid prop `".concat(t,"` is required when `useDefualtSessionManager` is false."))},orders:u.default.arrayOf(u.object),orderIds:u.default.arrayOf(u.number),orderStatus:u.default.arrayOf(u.number),orderBy:u.default.string,orderDirection:u.default.oneOf(["asc","desc"]),paginationSettings:u.default.exact({initialPage:u.default.number,pageSize:u.default.number,controlType:u.default.oneOf(["infinity","pages"])}),beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},S.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var P=S;t.default=P},572:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderTypeControl=void 0;var o=l(r(0)),a=l(r(3)),u=r(27);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t=e.UIComponent,r=c((0,u.useOrder)(),2),n=r[0],a=r[1].changeType,i=c((0,o.useState)(null),2),l=i[0],s=i[1];return(0,o.useEffect)((function(){s(n.options.type)}),[n.options.type]),o.default.createElement(o.default.Fragment,null,t&&o.default.createElement(t,f({},e,{typeSelected:l||n.options.type,handleChangeOrderType:e.handleChangeOrderType||function(e){s(e),a(e)}})))};t.OrderTypeControl=d,d.propTypes={UIComponent:a.default.elementType,orderTypes:a.default.arrayOf(a.object),handleChangeOrderType:a.default.func,beforeComponents:a.default.arrayOf(a.default.elementType),afterComponents:a.default.arrayOf(a.default.elementType),beforeElements:a.default.arrayOf(a.default.element),afterElements:a.default.arrayOf(a.default.element)},d.defaultProps={orderTypes:[1,2,3,4,5],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var p=d;t.default=p},573:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentOptions=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(27),l=r(16);c(r(289));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=["stripe","stripe_direct","stripe_connect","paypal"],g=["paypal_express","authorize"],O=["cash","card_delivery"],j=function(e){var t,r,n=e.isLoading,u=e.paymethods,f=e.businessId,c=e.isCustomerMode,p=e.onPaymentChange,m=e.UIComponent,b=v((0,l.useApi)(),1)[0],j=(null===(t=v((0,i.useOrder)(),1)[0].carts)||void 0===t||null===(r=t["businessId:".concat(f)])||void 0===r?void 0:r.total)||0,w=v((0,a.useState)({paymethods:[],loading:!0,error:null}),2),S=w[0],P=w[1],E=v((0,a.useState)(null),2),C=E[0],M=E[1],D=v((0,a.useState)({}),2),_=D[0],T=D[1],k=function(e){return e&&e.filter((function(e){var t,r,n;return c?!g.includes(null==e||null===(t=e.paymethod)||void 0===t?void 0:t.gateway)&&O.includes(null==e||null===(r=e.paymethod)||void 0===r?void 0:r.gateway):!g.includes(null==e||null===(n=e.paymethod)||void 0===n?void 0:n.gateway)})).map((function(e){return y(y({},null==e?void 0:e.paymethod),{},{sandbox:null==e?void 0:e.sandbox,credentials:null==e?void 0:e.data})}))},A=function(){var e,t=(e=o.default.mark((function e(){var t,r,n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.businesses(f).get();case 3:t=e.sent,r=t.content,n=r.error,a=r.result,n||(S.paymethods=k(a.paymethods)),P(y(y({},S),{},{error:n?a:null,loading:!1,paymethods:n?[]:k(a.paymethods)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),P(y(y({},S),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){d(a,n,o,u,i,"next",e)}function i(e){d(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}(),I=function(e){T(e),C?p&&p({paymethodId:C.id,gateway:C.gateway,paymethod:C,data:e}):p&&p(null)};return(0,a.useEffect)((function(){!C||!["card_delivery","cash","stripe_redirect"].includes(null==C?void 0:C.gateway)&&h.includes(null==C?void 0:C.gateway)?null===C&&p&&p(null):p&&p({paymethodId:C.id,gateway:C.gateway,paymethod:C,data:{}})}),[C]),(0,a.useEffect)((function(){n||(u?P(y(y({},S),{},{loading:!1,paymethods:k(u)})):f?A():P(y(y({},S),{},{loading:!1})))}),[n]),a.default.createElement(a.default.Fragment,null,m&&a.default.createElement(m,s({},e,{orderTotal:j,paymethodsList:S,paymethodSelected:C,paymethodData:_,handlePaymethodClick:function(e){M(e),I({})},handlePaymethodDataChange:I})))};t.PaymentOptions=j,j.propTypes={UIComponent:u.default.elementType,paymethods:u.default.array,businessId:u.default.number,onPaymentChange:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},j.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var w=j;t.default=w},583:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Messages=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(26),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.UIComponent,r=e.orderId,n=e.customHandleSend,u=e.messages,f=e.setMessages,c=b((0,l.useApi)(),1)[0],p=b((0,i.useSession)(),1)[0].token,m=e.accessToken||p,h=b((0,a.useState)({business:!0,administrator:!0,driver:!0}),2),g=h[0],O=h[1],j=b((0,a.useState)(""),2),w=j[0],S=j[1],P=b((0,a.useState)({loading:!1,error:null}),2),E=P[0],C=P[1],M=b((0,a.useState)(null),2),D=M[0],_=M[1],T=function(){var e,t=(e=o.default.mark((function e(){var t,a,i,l,s,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",n(w));case 2:return e.prev=2,C({loading:!0,error:null}),t=[3],g.administrator&&t.push(0),g.business&&t.push(2),g.driver&&t.push(4),a={comment:w,type:2,can_see:t.join(",")},D&&(a.type=3,a.file=D),e.next=12,fetch("".concat(c.root,"/orders/").concat(r,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify(a)});case 12:return i=e.sent,e.next=15,i.json();case 15:l=e.sent,s=l.error,p=l.result,s||f(y(y({},u),{},{messages:[].concat(d(u.messages),[p])})),C({loading:!1,error:s?p:null}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),C({loading:!1,error:[e.t0.Messages]});case 25:case"end":return e.stop()}}),e,null,[[2,22]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){v(a,n,o,u,i,"next",e)}function i(e){v(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,s({},e,{messages:u,image:D,canRead:g,handleSend:T,message:w,setMessage:S,setCanRead:O,sendMessage:E,setImage:_})))};t.Messages=O,O.propTypes={UIComponent:u.default.elementType,handleClickSetDefault:u.default.func,customHandleSend:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},O.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var j=O;t.default=j},591:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderDetails=void 0;var o=s(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=s(r(3)),i=r(26),l=r(16),f=r(112);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){b(a,n,o,u,i,"next",e)}function i(e){b(a,n,o,u,i,"throw",e)}u(void 0)}))}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e){var t,r,n,u,c,s,y=e.orderId,v=e.hashKey,b=e.UIComponent,O=e.userCustomerId,j=e.sendCustomMessage,w=g((0,i.useSession)(),1)[0],S=w.user,P=w.token,E=w.loading,C=e.accessToken||P,M=g((0,l.useApi)(),1)[0],D=g((0,a.useState)({order:null,businessData:{},loading:!e.order,error:null}),2),_=D[0],T=D[1],k=g((0,a.useState)({status:null,loading:!1,error:null}),2),A=k[0],I=k[1],x=g((0,a.useState)({loading:!0,error:null,messages:[]}),2),Y=x[0],U=x[1],H=(0,f.useWebsocket)(),R=g((0,a.useState)((null===(t=e.order)||void 0===t||null===(r=t.driver)||void 0===r?void 0:r.location)||(null===(n=_.order)||void 0===n||null===(u=n.driver)||void 0===u?void 0:u.location)||null),2),W=R[0],L=R[1],B=g((0,a.useState)(!1),2),z=B[0],F=B[1],q=["header","slug"],N=function(){var e=h(o.default.mark((function e(){var t,r,n,a,u,i,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(m(m({},Y),{},{loading:!0})),n=O?"".concat(M.root,"/orders/").concat(null===(t=_.order)||void 0===t?void 0:t.id,"/messages?mode=dashboard"):"".concat(M.root,"/orders/").concat(null===(r=_.order)||void 0===r?void 0:r.id,"/messages"),e.next=5,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)}});case 5:return a=e.sent,e.next=8,a.json();case 8:u=e.sent,i=u.error,l=u.result,U(i?m(m({},Y),{},{loading:!1,error:l}):{messages:l,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),U(m(m({},Y),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=h(o.default.mark((function e(t){var r,n,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return",j(t));case 2:return e.prev=2,I(m(m({},A),{},{loading:!0})),e.next=6,fetch("".concat(M.root,"/orders/").concat(null===(r=_.order)||void 0===r?void 0:r.id,"/messages"),{method:"post",headers:{Authorization:"Bearer ".concat(P),"Content-Type":"application/json"},body:JSON.stringify({can_see:"0,2,3",comment:"I am on the parking number: ".concat(t),order_id:null===(n=_.order)||void 0===n?void 0:n.id,type:2})});case 6:a=e.sent,u=a.status,I(m(m({},A),{},{loading:!1,status:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),I(m(m({},A),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=h(o.default.mark((function e(){var t,r,n,a,u,i,l,f,c,s,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},v&&(t.headers={"X-uuid-access-X":v}),O&&(t.query={mode:"dashboard"}),e.prev=3,e.next=6,M.setAccessToken(P).orders(y).get(t);case 6:return r=e.sent,n=r.content,a=n.error,u=n.result,i=a?null:u,l=a?u:null,f=null,e.prev=13,e.next=16,M.setAccessToken(P).businesses(i.business_id).select(q).get();case 16:c=e.sent,s=c.content,f=s.result,s.error&&l.push(s.result[0]),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(13),l.push(e.t0.message);case 25:T(m(m({},_),{},{loading:!1,order:i,businessData:f,error:l})),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(3),T(m(m({},_),{},{loading:!1,error:e.t1.message?null===(d=_.error)||void 0===d?void 0:d.push(null===e.t1||void 0===e.t1?void 0:e.t1.message):["ERROR"]}));case 31:case"end":return e.stop()}}),e,null,[[3,28],[13,22]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=h(o.default.mark((function e(){var t,r,n,a,u,i,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null==Y||null===(t=Y.messages[(null==Y||null===(r=Y.messages)||void 0===r?void 0:r.length)-1])||void 0===t?void 0:t.id,e.prev=1,e.next=4,fetch("".concat(M.root,"/orders/").concat(null===(a=_.order)||void 0===a?void 0:a.id,"/messages/").concat(n,"/read"),{method:"GET",headers:{Authorization:"Bearer ".concat(P),"Content-Type":"application/json"}});case 4:return u=e.sent,e.next=7,u.json();case 7:i=e.sent,l=i.result,F(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){!_.loading&&N()}),[y,null==_||null===(c=_.order)||void 0===c?void 0:c.status,_.loading]),(0,a.useEffect)((function(){e.order?T(m(m({},_),{},{order:e.order})):K()}),[]),(0,a.useEffect)((function(){var e;if(!_.loading&&!E){var t=function(e){var t;(null==e?void 0:e.id)===(null===(t=_.order)||void 0===t?void 0:t.id)&&(delete e.total,delete e.subtotal,T(m(m({},_),{},{order:Object.assign(_.order,e)})),N())},r=function(e){var t=e.location;L(null!=t?t:{lat:-37.9722342,lng:144.7729561})};return H.join("orders_".concat(null==S?void 0:S.id)),H.join("drivers_".concat(null===(e=_.order)||void 0===e?void 0:e.driver_id)),H.on("tracking_driver",r),H.on("update_order",t),function(){var e;H.leave("orders_".concat(null==S?void 0:S.id)),H.leave("drivers_".concat(null===(e=_.order)||void 0===e?void 0:e.driver_id)),H.off("update_order",t),H.off("tracking_driver",r)}}}),[_.order,H,E]),(0,a.useEffect)((function(){if(!Y.loading){var e=function(e){Y.messages.find((function(t){return t.id===e.id}))||U(m(m({},Y),{},{messages:[].concat(p(Y.messages),[e])}))};return H.on("message",e),function(){H.off("message",e)}}}),[Y,H,null===(s=_.order)||void 0===s?void 0:s.status]),(0,a.useEffect)((function(){return H.join("messages_orders_".concat(null==S?void 0:S.id)),function(){H.leave("messages_orders_".concat(null==S?void 0:S.id))}}),[H]),a.default.createElement(a.default.Fragment,null,b&&a.default.createElement(b,d({},e,{order:_,driverLocation:W,messageErrors:A,formatPrice:function(e){return e&&"$ ".concat(e.toFixed(2))},handlerSubmit:function(e){var t=e.spot;$(t)},messages:Y,setMessages:U,readMessages:V,messagesReadList:z})))};t.OrderDetails=w,w.propTypes={UIComponent:u.default.elementType,orderId:u.default.oneOfType([u.default.number,u.default.string]),order:u.default.object,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},w.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var S=w;t.default=S},592:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OrderReview=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=r(26),i=c(r(3)),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.UIComponent,r=e.order,n=e.onSaveReview,i=e.handleCustomSendReview,f=v((0,l.useApi)(),1)[0],c=v((0,u.useSession)(),1)[0],d=v((0,a.useState)({quality:1,punctiality:1,service:1,packaging:1,comments:""}),2),b=d[0],h=d[1],g=v((0,a.useState)({loading:!1,result:{error:!1}}),2),O=g[0],j=g[1],w=function(){var e,t=(e=o.default.mark((function e(){var t,a,u,l,s,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i&&i&&i(b),j(p(p({},O),{},{loading:!0})),e.prev=2,a={order_id:r.id,quality:b.quality,delivery:b.punctiality,service:b.service,package:b.packaging,comment:b.comments,user_id:null==c||null===(t=c.user)||void 0===t?void 0:t.id,business_id:r.business_id},e.next=6,fetch("".concat(f.root,"/business/").concat(r.business_id,"/reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"},body:JSON.stringify(a)});case 6:return u=e.sent,e.next=9,u.json();case 9:l=e.sent,s=l.result,d=l.error,n&&n(u),j({loading:!1,result:s,error:d}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),j({result:{error:!0,result:e.t0.message},loading:!1});case 19:case"end":return e.stop()}}),e,null,[[2,16]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){m(a,n,o,u,i,"next",e)}function i(e){m(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,s({},e,{stars:b,order:r,formState:O,handleSendReview:w,handleChangeInput:function(e){h(p(p({},b),{},{comments:e.target.value}))},handleChangeRating:function(e){h(p(p({},b),{},y({},e.target.name,parseInt(e.target.value))))}})))};t.OrderReview=h,h.propTypes={UIComponent:i.default.elementType,order:i.default.object,onSaveReview:i.default.func,handleSendReview:i.default.func,handleCustomSendReview:i.default.func},h.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var g=h;t.default=g},594:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PhoneAutocomplete=void 0;var o=s(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=s(r(3)),i=r(43),l=r(16),f=r(26);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){v(a,n,o,u,i,"next",e)}function i(e){v(a,n,o,u,i,"throw",e)}u(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.UIComponent,r=h((0,i.useLanguage)(),2)[1],n=h((0,l.useApi)(),1)[0],u=h((0,f.useSession)(),1)[0].token,c=h((0,a.useState)(""),2),s=c[0],p=c[1],m=h((0,a.useState)({customer:!1,signup:!1}),2),v=m[0],g=m[1],O=h((0,a.useState)({loading:!1,result:{error:!1}}),2),j=O[0],w=O[1],S=h((0,a.useState)({users:[],loading:!0,error:null}),2),P=S[0],E=S[1],C=function(){var e=b(o.default.mark((function e(t,r){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.filter((function(e){return(null==e?void 0:e.cellphone)===r})))[0]?(w({loading:!1,result:n[0]}),g(y(y({},v),{},{customer:!0}))):w({loading:!1,result:{error:!1}});case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),M=function(){var e=b(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(y(y({},P),{},{loading:!0})),e.prev=1,e.next=4,n.setAccessToken(u).users().get();case 4:t=e.sent,r=t.content.result,E(y(y({},P),{},{users:r,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),E(y(y({},P),{},{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),D=function(e,t,n,o,a,u,i){var l,f;var c=document.createElement("DIV");for((c=document.createElement("DIV")).setAttribute("id",i.id+"autocomplete-list"),c.setAttribute("class","autocomplete-items"),i.parentNode.appendChild(c),f=0;f<(null==n?void 0:n.length);f++){var d,m,b;if((null===(d=n[f])||void 0===d||null===(m=d.cellphone)||void 0===m||null===(b=m.substr(0,null==o?void 0:o.length))||void 0===b?void 0:b.toUpperCase())===(null==o?void 0:o.toUpperCase())){var h,O,j=null===(h=n[f])||void 0===h?void 0:h.cellphone;(l=document.createElement("DIV")).innerHTML="<strong>"+(null==j?void 0:j.substr(0,null==o?void 0:o.length))+"</strong>",l.innerHTML+=null==j?void 0:j.substr(null==o?void 0:o.length),l.innerHTML+=" ("+(null===(O=n[f])||void 0===O?void 0:O.name)+")",l.innerHTML+="<input type='hidden' value='"+j+"'>",l.addEventListener("click",(function(e){t.value=this.getElementsByTagName("input")[0].value,p(this.getElementsByTagName("input")[0].value),C(n,this.getElementsByTagName("input")[0].value),u()})),c.appendChild(l)}}(l=document.createElement("DIV")).innerHTML="<strong>"+r("CREATE_CUSTOMER","Create new customer")+"</strong>",l.innerHTML+="<input type='hidden' value='"+r("CREATE_CUSTOMER","Create new customer")+"'>",l.addEventListener("click",(function(e){10===a.target.value.length||10===s.length?g(y(y({},v),{},{signup:!0})):E(y(y({},P),{},{error:r("ERROR_MIN_CHARACTERS_PHONE","The Phone / Mobile must be 10 characters")})),u()})),c.appendChild(l)};return(0,a.useEffect)((function(){!function(e,t,r){var n;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function a(t){for(var r=document.getElementsByClassName("autocomplete-items"),n=0;n<r.length;n++)t!==r[n]&&t!==e&&r[n].parentNode.removeChild(r[n])}e.addEventListener("input",(function(r){var n=this.value;if(a(),!n)return!1;D(0,e,t,n,r,a,this)})),r&&r.addEventListener("click",(function(r){var n=e.value;if(a(),!n)return!1;D(0,e,t,n,r,a,e)})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40===e.keyCode?(n++,o(t)):38===e.keyCode?(n--,o(t)):13===e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())})),document.addEventListener("click",(function(e){e.target.classList.contains("phone-button")||a(e.target)}))}(document.getElementById("phone-input"),P.users,document.getElementById("phone-button"))})),(0,a.useEffect)((function(){M()}),[]),a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,d({},e,{phone:s,customerState:j,customersPhones:P,setCustomersPhones:E,onChangeNumber:function(e){var t,r,n;p((null===(t=e.target)||void 0===t||null===(r=t.validity)||void 0===r?void 0:r.valid)?null===(n=e.target)||void 0===n?void 0:n.value:s)},openModal:v,setOpenModal:g,setCustomerState:w})))};t.PhoneAutocomplete=O,O.propTypes={UIComponent:u.default.elementType,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},O.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var j=O;t.default=j},596:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentOptionCash=void 0;var n=a(r(0)),o=a(r(3));function a(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=function(e){var t=e.UIComponent,r=e.orderTotal;return n.default.createElement(n.default.Fragment,null,t&&n.default.createElement(t,u({},e,{total:r})))};t.PaymentOptionCash=i,i.propTypes={UIComponent:o.default.elementType,useOrderContext:o.default.bool,businessId:o.default.number,orderTotal:o.default.number,handlerSubmit:o.default.func,beforeComponents:o.default.arrayOf(o.default.elementType),afterComponents:o.default.arrayOf(o.default.elementType),beforeElements:o.default.arrayOf(o.default.element),afterElements:o.default.arrayOf(o.default.element)},i.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var l=i;t.default=l},597:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentOptionStripe=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(26),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){m(a,n,o,u,i,"next",e)}function i(e){m(a,n,o,u,i,"throw",e)}u(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){var t=e.businessId,r=e.UIComponent,n=b((0,i.useSession)(),1)[0],u=n.token,f=n.user,c=b((0,l.useApi)(),1)[0],d=b((0,a.useState)({cards:[],loading:!0,error:null}),2),y=d[0],m=d[1],h=b((0,a.useState)(e.publicKey),2),g=h[0],O=h[1],j=b((0,a.useState)(null),2),w=j[0],S=j[1],P=b((0,a.useState)(null),2),E=P[0],C=P[1],M=b((0,a.useState)({loading:!1,error:null}),2),D=M[0],_=M[1],T={},k=function(){var e=v(o.default.mark((function e(){var r,n,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(p(p({},y),{},{loading:!0})),e.prev=1,r={},T.paymentCards=r,e.next=6,c.setAccessToken(u).paymentCards(t,f.id).get({cancelToken:r});case 6:n=e.sent,a=n.content.result,(i=null==a?void 0:a.find((function(e){return e.default})))&&C({id:i.id,type:"card",card:{brand:i.brand,last4:i.last4}}),m(p(p({},y),{},{loading:!1,cards:a})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),m(p(p({},y),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=v(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.paymentCards(-1,f.id,t.id).delete();case 3:r=e.sent,r.content.error||(y.cards=y.cards.filter((function(e){return e.id!==t.id})),m(p({},y))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=v(o.default.mark((function e(r){var n,a,i,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(p(p({},D),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify({business_id:t,user_id:f.id,card_id:r.id})},a="".concat(c.root,"/payments/stripe/cards/default"),e.next=6,fetch(a,n);case 6:return i=e.sent,e.next=9,i.json();case 9:(l=e.sent).error?_({loading:!1,error:l.result}):(C({id:r.id,type:"card",card:{brand:r.brand,last4:r.last4}}),_({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),_({loading:!1,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=v(o.default.mark((function e(){var t,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.setAccessToken(u).paymentCards().getCredentials();case 3:t=e.sent,r=t.content.result,O(r.publishable),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Y=function(e){S({id:e.id,type:"card",card:{brand:e.brand,last4:e.last4}})};return(0,a.useEffect)((function(){return u&&(k(),e.publicKey||x()),function(){T.paymentCards&&T.paymentCards.cancel()}}),[u]),a.default.createElement(a.default.Fragment,null,r&&a.default.createElement(r,s({},e,{cardSelected:w,cardDefault:E,cardsList:y,handleCardClick:Y,publicKey:g,handleNewCard:function(e){y.cards.push(e),m(p({},y)),Y(e)},deleteCard:A,setDefaultCard:I,defaultCardSetActionStatus:D})))};t.PaymentOptionStripe=g,g.propTypes={UIComponent:u.default.elementType,businessId:u.default.number.isRequired,userId:u.default.number,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},g.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var O=g;t.default=O},598:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentOptionStripeDirect=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(26),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){d(a,n,o,u,i,"next",e)}function i(e){d(a,n,o,u,i,"throw",e)}u(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.UIComponent,r=y((0,l.useApi)(),1)[0],n=y((0,i.useSession)(),1)[0].token,u=y((0,a.useState)(null),2),f=u[0],c=u[1],d=y((0,a.useState)(null),2),m=d[0],v=d[1],b=function(){var e=p(o.default.mark((function e(){var t,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,u=a.result.publishable,c(u);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=p(o.default.mark((function e(){var t,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,u=a.result,v(u);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){n&&(b(),h())}),[n]),a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,s({},e,{stripeKey:f,clientSecret:m})))};t.PaymentOptionStripeDirect=v,v.propTypes={UIComponent:u.default.elementType,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},v.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var b=v;t.default=b},599:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentOptionStripeRedirect=void 0;var o=c(r(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=c(r(3)),i=r(26),l=r(16);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t,r=e.paymentMethods,n=e.UIComponent,u=p((0,i.useSession)(),1)[0].token,f=p((0,l.useApi)(),1)[0],c=p((0,a.useState)(null),2),y=c[0],m=c[1],v=function(){var e,t=(e=o.default.mark((function e(){var t,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(u)}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.result.publishable,m(n);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){d(a,n,o,u,i,"next",e)}function i(e){d(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,a.useEffect)((function(){v()}),[]),a.default.createElement(a.default.Fragment,null,n&&y&&a.default.createElement(n,s({},e,{stripePK:y,modalName:(t="",r.map((function(e,n){n===r.length-1?t+="".concat(e.name):t+="".concat(e.name,", ")})),t)})))};t.PaymentOptionStripeRedirect=m,m.propTypes={UIComponent:u.default.elementType,businessId:u.default.number.isRequired,currency:u.default.string.isRequired,paymentMethods:u.default.arrayOf(u.default.object).isRequired,handlerStripeSource:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},m.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var v=m;t.default=v},602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.StripeRedirectForm=void 0;var n=u(r(9)),o=u(r(0)),a=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t,r,n,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}var f=function(e){var t=e.UIComponent,r=e.handleStripeRedirect,a=function(){var e,t=(e=n.default.mark((function e(t){var o,a,u;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.type,a=t.name,u=t.email,r&&r({type:o,owner:{name:a,email:u}});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){l(a,n,o,u,i,"next",e)}function i(e){l(a,n,o,u,i,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}();return o.default.createElement(o.default.Fragment,null,t&&o.default.createElement(t,i({},e,{handleSubmitPaymentMethod:a})))};t.StripeRedirectForm=f,f.propTypes={UIComponent:a.default.elementType,beforeComponents:a.default.arrayOf(a.default.elementType),afterComponents:a.default.arrayOf(a.default.elementType),beforeElements:a.default.arrayOf(a.default.element),afterElements:a.default.arrayOf(a.default.element)},f.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var c=f;t.default=c}}]);