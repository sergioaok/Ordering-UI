(window.webpackJsonpOrderingUI=window.webpackJsonpOrderingUI||[]).push([[26],{507:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AddressDetails=void 0;var o=d(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=d(n(3)),i=n(27),l=n(16),s=n(113),c=n(55);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t,n=e.apiKey,r=e.UIComponent,u=e.mapConfigs,f=m((0,i.useOrder)(),1)[0],d=m((0,s.useUtils)(),1)[0].optimizeImage,v=m((0,c.useConfig)(),1)[0].configs,b=n||(null==v||null===(t=v.google_maps_api_key)||void 0===t?void 0:t.value),g={},h=m((0,a.useState)(null),2),O=h[0],w=h[1],j=m((0,a.useState)(null),2),S=j[0],P=j[1],C=m((0,l.useApi)(),1)[0],E=function(){var t,n=(t=o.default.mark((function t(){var n,r,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={},g.business=n,t.next=5,C.businesses(e.businessId).select(["location","logo"]).get({cancelToken:n});case 5:r=t.sent,a=r.content.result,P(a.logo),w(a.location),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function u(e){y(a,r,o,u,i,"next",e)}function i(e){y(a,r,o,u,i,"throw",e)}u(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,a.useEffect)((function(){return e.location&&e.businessLogo?(w(e.location),P(e.businessLogo)):E(),function(){g.business&&g.business.cancel()}}),[]),a.default.createElement(a.default.Fragment,null,r&&a.default.createElement(r,p({},e,{googleMapsUrl:function(t){var n,r,o,a,i,l,s=e.orderLocation||(null==f||null===(n=f.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location);return 1===f.options.type?"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==u||null===(o=u.mapSize)||void 0===o?void 0:o.width)||500,"x").concat((null==u||null===(a=u.mapSize)||void 0===a?void 0:a.height)||190,"&center=").concat(null==s?void 0:s.lat,",").concat(null==s?void 0:s.lng,"&zoom=").concat((null==u?void 0:u.mapZoom)||15,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==s?void 0:s.lat,",").concat(null==s?void 0:s.lng,"&key=").concat(b):"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==u||null===(i=u.mapSize)||void 0===i?void 0:i.width)||500,"x").concat((null==u||null===(l=u.mapSize)||void 0===l?void 0:l.height)||190,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==s?void 0:s.lat,",").concat(null==s?void 0:s.lng,"&markers=icon:").concat(d(S,"w_60,h_60,r_max"),"%7Ccolor:white%7C").concat(null==t?void 0:t.lat,",").concat(null==t?void 0:t.lng,"&key=").concat(b)}(O)})))};t.AddressDetails=b,b.propTypes={UIComponent:u.default.elementType,business:u.default.object,businessId:u.default.number,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},b.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var g=b;t.default=g},538:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AddressForm=void 0;var o=p(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=p(n(3)),i=n(26),l=n(16),s=n(27),c=n(114),f=n(115);function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){g(a,r,o,u,i,"next",e)}function i(e){g(a,r,o,u,i,"throw",e)}u(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t=e.UIComponent,n=e.addressId,r=e.address,u=e.useValidationFileds,d=e.onSaveAddress,p=e.isSelectedAfterAdd,m=e.onSaveCustomAddress,g=O((0,l.useApi)(),1)[0],w=O((0,c.useValidationFields)(),1)[0],j=O((0,a.useState)({loading:!1,error:null,address:r||{}}),2),S=j[0],P=j[1],C=O((0,a.useState)({loading:!1,changes:{},error:null}),2),E=C[0],_=C[1],A=O((0,i.useSession)(),1)[0],k=A.auth,I=A.user,T=A.token,M={},x=O((0,s.useOrder)(),2)[1].changeAddress,D=e.userId||(null==I?void 0:I.id),U=e.accessToken||T,B=O((0,f.useCustomer)(),2)[1].setUserCustomer,L=O((0,a.useState)(!1),2),F=L[0],Y=L[1],W=function(){var e=h(o.default.mark((function e(t,n){var r,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(v(v({},S),{},{loading:!0})),r={},M.address=r,e.next=6,g.users(t).addresses(n).get({accessToken:U,cancelToken:r});case 6:a=e.sent,u=a.content,P({loading:!1,error:u.error?u.result:null,address:u.error?{}:u.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&P({loading:!1,error:[e.t0.message],address:{}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e){_(v(v({},E),{},{changes:v(v({},E.changes),e)}))},H=function(){var e=h(o.default.mark((function e(t,n){var r,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=3;break}return m(t),e.abrupt("return");case 3:if(k){e.next=7;break}return x(v(v({},t),E.changes)),d&&d(E.changes),e.abrupt("return");case 7:return n&&B(n,!0),_(v(v({},E),{},{loading:!0})),e.prev=9,e.next=12,g.users(D).addresses(null===(r=S.address)||void 0===r?void 0:r.id).save(v(v({},t),E.changes),{accessToken:U});case 12:a=e.sent,u=a.content,_(v(v({},E),{},{loading:!1,error:u.error?u.result:null,changes:u.error?E.changes:{}})),u.error||(P(v(v({},S),{},{address:u.result})),d&&d(u.result),p&&x(u.result.id,{address:F?null:u.result,isEdit:F})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),_(v(v({},E),{},{loading:!1,error:[e.t0.message],address:{}}));case 21:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){P(v(v({},S),{},{address:r||{}}))}),[r]),(0,a.useEffect)((function(){n&&!r&&W(D,n)}),[]),(0,a.useEffect)((function(){return function(){M.address&&M.address.cancel()}}),[]),a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,y({},e,{formState:E,showField:function(e){var t,n,r;return!u||!w.loading&&!(null===(t=w.fields)||void 0===t?void 0:t.address[e])||!w.loading&&(null===(n=w.fields)||void 0===n?void 0:n.address[e])&&(null===(r=w.fields)||void 0===r?void 0:r.address[e].enabled)},updateChanges:z,handleChangeInput:function(e){z(b({},e.target.name,e.target.value))},isRequiredField:function(e){var t,n,r,o,a,i,l,s;return u&&!w.loading&&(null===(t=w.fields)||void 0===t||null===(n=t.address)||void 0===n?void 0:n[e])&&(null===(r=w.fields)||void 0===r||null===(o=r.address)||void 0===o||null===(a=o[e])||void 0===a?void 0:a.enabled)&&(null===(i=w.fields)||void 0===i||null===(l=i.address)||void 0===l||null===(s=l[e])||void 0===s?void 0:s.required)},saveAddress:H,addressState:S,setIsEdit:function(e){return Y(e)}})))};t.AddressForm=j,j.propTypes={UIComponent:u.default.elementType,isSelectedAfterAdd:u.default.bool,useValidationFileds:u.default.bool,address:u.default.object,userId:u.default.number,addressId:u.default.number,onSaveAddress:u.default.func,onSaveCustomAddress:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},j.defaultProps={useValidationFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var S=j;t.default=S},539:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AddressList=void 0;var o=d(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=d(n(3)),i=n(26),l=n(27),s=n(16),c=n(115);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){b(a,r,o,u,i,"next",e)}function i(e){b(a,r,o,u,i,"throw",e)}u(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.UIComponent,n=e.changeOrderAddressWithDefault,r=e.handleClickSetDefault,u=e.handleClickDelete,f=h((0,s.useApi)(),1)[0],d=h((0,i.useSession)(),1)[0],y=d.user,v=d.token,b=h((0,c.useCustomer)(),2)[1].setUserCustomer,O=e.userId||(null==y?void 0:y.id),w=e.accessToken||v;if(!O)throw new Error("`userId` must provide from props or use SessionProviver to wrappe the app.");if(!w)throw new Error("`accessToken` must provide from props or use SessionProviver to wrappe the app.");var j=h((0,a.useState)({loading:!0,error:null,addresses:[]}),2),S=j[0],P=j[1],C=h((0,a.useState)({loading:!1,error:null}),2),E=C[0],_=C[1],A=h((0,l.useOrder)(),2)[1].changeAddress,k={},I=function(){var e=g(o.default.mark((function e(){var t,n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(m(m({},S),{},{loading:!0})),t={},k.list=t,e.next=6,f.setAccessToken(w).users(O).addresses().get({cancelToken:t});case 6:n=e.sent,r=n.content,P({loading:!1,error:r.error?r.result:null,addresses:r.error?[]:Array.isArray(r.result)?r.result:[]}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&P(m(m({},S),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){return I(),function(){k.list&&k.list.cancel()}}),[]);var T=function(){var e=g(o.default.mark((function e(t,a){var u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&b(m(m({},a),{},{address:null==t?void 0:t.address,address_notes:null==t?void 0:t.address_notes,internal_number:null==t?void 0:t.internal_number,zipcode:null==t?void 0:t.zipcode}),!0),!r){e.next=3;break}return e.abrupt("return",r(t));case 3:return e.prev=3,_(m(m({},E),{},{loading:!0})),e.next=7,f.setAccessToken(w).users(O).addresses(t.id).save({default:!0});case 7:u=e.sent,i=u.content,_({loading:!1,error:i.error?i.result:null}),!i.error&&i.result.default&&(S.addresses.map((function(e){return e.default=e.id===t.id,e})),n&&A(i.result.id),P(m({},S))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),_(m(m({},E),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=g(o.default.mark((function e(t){var n,r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return",u(t));case 2:return e.prev=2,_(m(m({},E),{},{loading:!0})),e.next=6,f.users(O).addresses(t.id).delete({accessToken:w});case 6:n=e.sent,r=n.content,_({loading:!1,error:r.error?r.result:null}),r.error||(a=S.addresses.filter((function(e){return e.id!==t.id})),P(m(m({},S),{},{addresses:a}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),_(m(m({},E),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,p({},e,{addressList:S,setAddressList:P,actionStatus:E,handleSetDefault:T,handleDelete:M})))};t.AddressList=w,w.propTypes={UIComponent:u.default.elementType,handleClickAddress:u.default.func,handleClickSetDefault:u.default.func,handleClickDelete:u.default.func,userId:u.default.number,accessToken:u.default.string,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},w.defaultProps={changeOrderAddressWithDefault:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var j=w;t.default=j},540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseComponent=void 0;var r=a(n(0)),o=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.UIComponent;return r.default.createElement(r.default.Fragment,null,t&&r.default.createElement(t,e))};t.BaseComponent=u,u.propTypes={UIComponent:o.default.elementType,beforeComponents:o.default.arrayOf(o.default.elementType),afterComponents:o.default.arrayOf(o.default.elementType),beforeElements:o.default.arrayOf(o.default.element),afterElements:o.default.arrayOf(o.default.element)},u.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var i=u;t.default=i},541:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessAndProductList=void 0;var o=d(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=d(n(3)),i=d(n(76)),l=d(n(81)),s=n(27),c=n(43);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){g(a,r,o,u,i,"next",e)}function i(e){g(a,r,o,u,i,"throw",e)}u(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}i.default.extend(l.default);var S=function(e){var t,n,r,u,l,f=e.isSearchByName,d=e.isSearchByDescription,m=e.slug,b=e.categoryId,g=e.productId,w=e.isInitialRender,j=e.ordering,S=e.businessProps,P=e.menusProps,C=e.isGetMenus,E=e.UIComponent,_=O((0,s.useOrder)(),1)[0],A=O((0,c.useLanguage)(),2),k=A[0],I=A[1],T=O((0,a.useState)({id:null,name:I("ALL","All")}),2),M=T[0],x=T[1],D=O((0,a.useState)(null),2),U=D[0],B=D[1],L=O((0,a.useState)(null),2),F=L[0],Y=L[1],W=O((0,a.useState)(null),2),z=W[0],H=W[1],R=O((0,a.useState)({business:{},menus:null,loading:!0,error:null}),2),$=R[0],q=R[1],N=O((0,a.useState)({}),2),V=N[0],J=N[1],G=O((0,a.useState)(),2),K=G[0],Q=G[1],Z=O((0,a.useState)({}),2),X=Z[0],ee=Z[1],te=O((0,a.useState)({product:null,loading:!1,error:null}),2),ne=te[0],re=te[1],oe=O((0,a.useState)(!1),2),ae=oe[0],ue=oe[1],ie={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},le=O((0,a.useState)(ie),2),se=le[0],ce=le[1],fe=O((0,a.useState)(null),2),de=fe[0],pe=fe[1],ye=O((0,a.useState)(!1),2),me=ye[0],ve=ye[1],be=function(e,t){return!U||(e&&e.toLowerCase().includes(U.toLowerCase())&&f||t&&t.toLowerCase().includes(U.toLowerCase())&&d)},ge=function(e,t){return i.default.utc(e,t).format(t)===e},he=function(e){return!!e.featured&&(!U||(e.name&&e.name.toLowerCase().includes(U.toLowerCase())&&f||e.description&&e.description.toLowerCase().includes(U.toLowerCase())&&d))},Oe=function(e,t){return"rank"===e?t.sort((function(e,t){return t.rank-e.rank})):"a-z"===e?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})):t},we=function(){var e=h(o.default.mark((function e(t){var n,r,a,u,l,s,c,p,m,b,g,h,O,w,S,P,C,E,A,k,I,T,x,D,B,L,Y,W,z,H,R,q,N,G,K,Q;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==$||null===(n=$.business)||void 0===n?void 0:n.lazy_load_products_recommended){e.next=8;break}return p=!!(null==$||null===(l=$.business)||void 0===l||null===(s=l.categories)||void 0===s||null===(c=s.find((function(e){return e})))||void 0===c?void 0:c.products.filter((function(e){return e.featured})).length),ue(p),m=v(v({},ie),{},{loading:!1}),"featured"!==M.id&&null!==M.id?(O=null==$||null===(b=$.business)||void 0===b||null===(g=b.categories)||void 0===g||null===(h=g.find((function(e){return e.id===M.id})))||void 0===h?void 0:h.products.filter((function(e){return be(e.name,e.description)})),m.products=O||[]):"featured"===M.id?(P=null==$||null===(w=$.business)||void 0===w||null===(S=w.categories)||void 0===S?void 0:S.reduce((function(e,t){return[].concat(y(e),y(t.products))}),[]).filter((function(e){return he(e)})),m.products=P||[]):(A=null==$||null===(C=$.business)||void 0===C||null===(E=C.categories)||void 0===E?void 0:E.reduce((function(e,t){return[].concat(y(e),y(t.products))}),[]).filter((function(e){return be(e.name,e.description)})),m.products=A||[]),m.products=Oe(F,m.products),ce(v({},m)),e.abrupt("return");case 8:if(k=U?"search":"featured"===M.id?"featured":M.id?"categoryId:".concat(M.id):"all",(I=V[k]||ie).products=Oe(F,I.products),T=I.pagination,t||!(T.currentPage>0)||T.currentPage!==T.totalPages){e.next=15;break}return ce(v(v({},I),{},{loading:!1})),e.abrupt("return");case 15:return ce(v(v({},I),{},{loading:!0})),x={type:(null===(r=_.options)||void 0===r?void 0:r.type)||1,page:t?1:T.currentPage+1,page_size:T.pageSize},(null===(a=_.options)||void 0===a?void 0:a.moment)&&ge(null===(u=_.options)||void 0===u?void 0:u.moment,"YYYY-MM-DD HH:mm:ss")&&(B=i.default.utc(null===(D=_.options)||void 0===D?void 0:D.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),x.timestamp=B),F&&(x.orderBy="a-z"===F?"name":F),L=null,Y=[],U&&(f&&Y.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(U,"%"))}}),d&&Y.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(U,"%"))}})),L={conditions:Y,conector:"OR"},"featured"===M.id&&(x.params="features"),"featured"===M.id&&U&&(x.params="features",L={conditions:[{conditions:Y,conector:"OR"}],conector:"AND"}),e.prev=25,W=M.id&&"featured"!==M.id?j.businesses($.business.id).categories(M.id).products():j.businesses($.business.id).products(),z={},X.products=z,ee(v({},X)),H=L.conditions.length>0?W.parameters(x).where(L):W.parameters(x),e.next=33,H.get({cancelToken:z});case 33:R=e.sent,q=R.content,N=q.error,G=q.result,K=q.pagination,N?pe(G):(Q={pagination:v(v({},I.pagination),{},{currentPage:K.current_page,totalItems:K.total,totalPages:K.total_pages}),loading:!1,products:t?y(G):[].concat(y(I.products),y(G))},V[k]=Q,ce(v({},Q)),J(v({},V)),ue(!!V.all.products.find((function(e){return e.featured})))),e.next=44;break;case 41:e.prev=41,e.t0=e.catch(25),pe([e.t0.message]);case 44:case"end":return e.stop()}}),e,null,[[25,41]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=h(o.default.mark((function e(){var t,n,r,a,u,l,s,c,f,d,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b&&g&&$.business.id)){e.next=18;break}return e.prev=1,re(v(v({},ne),{},{loading:!0})),u={},X.product=u,l={type:(null===(t=_.options)||void 0===t?void 0:t.type)||1,moment:(null===(n=_.options)||void 0===n?void 0:n.moment)||null},(null===(r=_.options)||void 0===r?void 0:r.moment)&&ge(null===(a=_.options)||void 0===a?void 0:a.moment,"YYYY-MM-DD HH:mm:ss")&&(c=i.default.utc(null===(s=_.options)||void 0===s?void 0:s.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),l.timestamp=c),e.next=9,j.businesses($.business.id).categories(b).products(g).parameters(l).get({cancelToken:u});case 9:f=e.sent,d=f.content.result,p=Array.isArray(d)?null:d,re(v(v({},ne),{},{product:p,loading:!1})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),re(v(v({},ne),{},{loading:!1,error:[e.t0]}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){w&&je()}),[JSON.stringify(null===(t=$.business)||void 0===t?void 0:t.id),w]);var Se=function(){var e=h(o.default.mark((function e(){var t,n,r,a,u,l,s,c,f,d,p,y,b,g,h,O,w,E,A,k,I;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(v(v({},$),{},{loading:!0})),b={},X.business=b,ee(v({},X)),g={type:(null===(t=_.options)||void 0===t?void 0:t.type)||1,location:(null===(n=_.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location)?"".concat(null===(a=_.options)||void 0===a||null===(u=a.address)||void 0===u||null===(l=u.location)||void 0===l?void 0:l.lat,",").concat(null===(s=_.options)||void 0===s||null===(c=s.address)||void 0===c||null===(f=c.location)||void 0===f?void 0:f.lng):null},(null===(d=_.options)||void 0===d?void 0:d.moment)&&ge(null===(p=_.options)||void 0===p?void 0:p.moment,"YYYY-MM-DD HH:mm:ss")&&(O=i.default.utc(null===(h=_.options)||void 0===h?void 0:h.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),g.timestamp=O),z&&(g.menu_id=z),e.next=10,j.businesses(m).select(S).parameters(g).get({cancelToken:b});case 10:if(w=e.sent,(null==(E=w.content.result)?void 0:E.categories)&&0!==(null==E||null===(y=E.categories)||void 0===y?void 0:y.length)||ve(!0),A=v(v({},$),{},{business:E,loading:!1}),!P||!C){e.next=20;break}return e.next=17,j.businesses(E.id).menus().select(P).get();case 17:k=e.sent,I=k.content.result,A.menus=I;case 20:q(A),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),q(v(v({},$),{},{loading:!1,error:[e.t0.message]}));case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){$.loading||we(!0)}),[$]),(0,a.useEffect)((function(){we(!!U)}),[U]),(0,a.useEffect)((function(){we(!!U)}),[M.id]),(0,a.useEffect)((function(){we(!!U)}),[F]),(0,a.useEffect)((function(){we()}),[m]),(0,a.useEffect)((function(){_.loading||!K||k.loading||Se()}),[K,k.loading,m,z]),(0,a.useEffect)((function(){var e,t,n,r;_.loading||Q({type:null==_||null===(e=_.options)||void 0===e?void 0:e.type,moment:null==_||null===(t=_.options)||void 0===t?void 0:t.moment,location:null==_||null===(n=_.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location})}),[null==_||null===(n=_.options)||void 0===n?void 0:n.type,null==_||null===(r=_.options)||void 0===r?void 0:r.moment,JSON.stringify(null==_||null===(u=_.options)||void 0===u||null===(l=u.address)||void 0===l?void 0:l.location)]),(0,a.useEffect)((function(){var e=X.business;return function(){e&&e.cancel&&e.cancel()}}),[X.business]),(0,a.useEffect)((function(){var e=X.products;return function(){e&&e.cancel&&e.cancel()}}),[X.products]),a.default.createElement(a.default.Fragment,null,E&&a.default.createElement(E,p({},e,{errors:de,categorySelected:M,searchValue:U,sortByValue:F,filterByMenus:z,categoryState:se,businessState:$,productModal:ne,featuredProducts:ae,errorQuantityProducts:me,handleChangeCategory:function(e){(null==e?void 0:e.id)!==(null==M?void 0:M.id)&&x(e)},handleChangeSearch:function(e){B(e)},handleChangeSortBy:function(e){Y(e)},handleChangeFilterByMenus:function(e){H(e)},getNextProducts:we,updateProductModal:function(e){return re(v(v({},ne),{},{product:e}))}})))};t.BusinessAndProductList=S,S.propTypes={UIComponent:u.default.elementType},S.defaultProps={};var P=S;t.default=P},542:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessBasicInformation=void 0;var o,a=(o=n(9))&&o.__esModule?o:{default:o},u=c(n(0)),i=c(n(3)),l=n(16);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){m(a,r,o,u,i,"next",e)}function i(e){m(a,r,o,u,i,"throw",e)}u(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t=e.UIComponent,n=e.business,r=e.businessId,o=e.businessParams,i=b((0,l.useApi)(),1)[0],s=b((0,u.useState)({business:{},loading:!1,error:null}),2),c=s[0],d=s[1],y={},m=function(){var e=v(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},y.business=n,e.next=4,i.businesses(t).select(o).parameters({location:"40.7539143,-73.9810162",type:1}).get({cancelToken:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=v(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(p(p({},c),{},{loading:!0})),e.next=4,m(r);case 4:t=e.sent,n=t.content.result,d(p(p({},c),{},{loading:!1,business:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d(p(p({},c),{},{loading:!1,error:[e.t0]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){return n?d(p(p({},c),{},{business:n})):g(),function(){y.business&&y.business.cancel()}}),[]),u.default.createElement(u.default.Fragment,null,t&&u.default.createElement(t,f({},e,{businessState:c})))};t.BusinessBasicInformation=h,h.propTypes={UIComponent:i.default.elementType,business:i.default.object,businessParams:i.default.arrayOf(i.string),beforeComponents:i.default.arrayOf(i.default.elementType),afterComponents:i.default.arrayOf(i.default.elementType),beforeElements:i.default.arrayOf(i.default.element),afterElements:i.default.arrayOf(i.default.element)},h.defaultProps={businessParams:["header","logo","name","today","delivery_price","minimum","description","distance","delivery_time","pickup_time","reviews"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var O=h;t.default=O},543:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessController=void 0;var o=f(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=f(n(3)),i=n(27),l=n(16),s=n(113);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t,n,r=e.business,u=e.businessId,c=e.businessAttributes,f=e.onBusinessClick,m=e.handleCustomClick,v=e.UIComponent,b=y((0,l.useApi)(),1)[0],g=y((0,a.useState)(r),2),h=g[0],O=g[1],w=y((0,a.useState)(null),2),j=w[0],S=w[1],P=y((0,a.useState)(!1),2),C=P[0],E=P[1],_=y((0,i.useOrder)(),1)[0],A=y((0,s.useUtils)(),1)[0].parsePrice,k=function(){var e,t=(e=o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.businesses(u).select(c).get();case 2:t=e.sent,n=t.content.result,O(n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){p(a,r,o,u,i,"next",e)}function i(e){p(a,r,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}(),I=function(e){var t=(null==e?void 0:e.hour)<10?"0".concat(null==e?void 0:e.hour):null==e?void 0:e.hour,n=(null==e?void 0:e.minute)<10?"0".concat(null==e?void 0:e.minute):null==e?void 0:e.minute;return e?"".concat(t,":").concat(n):"none"},T=I((null==h||null===(t=h.today)||void 0===t||null===(n=t.lapses[0])||void 0===n?void 0:n.close)||null);return(0,a.useEffect)((function(){var e=null==j?void 0:j.split(":")[0],t=null==j?void 0:j.split(":")[1],n=null==T?void 0:T.split(":")[0],r=null==T?void 0:T.split(":")[1];T&&E(e>n||e===n&&t>=r)}),[j]),(0,a.useEffect)((function(){var e=setInterval((function(){var e=(new Date).getHours(),t=(new Date).getMinutes();S("".concat(e,":").concat(t))}),1e3);return function(){return clearInterval(e)}}),[]),(0,a.useEffect)((function(){r?O(r):k()}),[]),a.default.createElement(a.default.Fragment,null,v&&a.default.createElement(v,d({},e,{orderState:_,isBusinessClose:C,business:h,formatDate:I,formatNumber:function(e){return Math.round(100*e)/100},getBusinessOffer:function(e){if(!e||!e.length)return null;var t=e.reduce((function(e,t){return e.rate>t.rate?e:t}));return 1===(null==t?void 0:t.rate_type)?"".concat(null==t?void 0:t.rate,"%"):A(null==t?void 0:t.rate)},getBusinessMaxOffer:function(e){return e&&e.length?e.reduce((function(e,t){return e.rate>t.rate?e:t})):null},handleClick:m||f})))};t.BusinessController=v,v.propTypes={UIComponent:u.default.elementType,business:u.default.object,businessId:u.default.number,businessAttributes:u.default.arrayOf(u.default.string),onBusinessClick:u.default.func,handleCustomClick:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},v.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var b=v;t.default=b},544:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessList=void 0;var o=p(n(9)),a=d(n(0)),u=d(n(3)),i=p(n(76)),l=p(n(81)),s=n(16),c=n(27);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function p(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}i.default.extend(l.default);var S=function(e){var t,n=e.UIComponent,r=e.initialBuisnessType,u=e.initialOrderType,l=e.initialFilterKey,f=e.initialFilterValue,d=e.isOfferBusinesses,p=e.isSortByReview,v=e.isSearchByName,g=e.isSearchByDescription,w=e.isFeatured,j=e.isDoordash,S=e.paginationSettings,P=e.customLocation,C=e.propsToFetch,E=e.onBusinessClick,_=e.windowPathname,A=O((0,a.useState)({businesses:[],loading:!0,error:null}),2),k=A[0],I=A[1],T=O((0,a.useState)({currentPage:"pages"===S.controlType&&S.initialPage&&S.initialPage>=1?S.initialPage-1:0,pageSize:null!==(t=S.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),M=T[0],x=T[1],D=O((0,a.useState)(null),2),U=D[0],B=D[1],L=O((0,a.useState)(""),2),F=L[0],Y=L[1],W=O((0,a.useState)(null),2),z=W[0],H=W[1],R=O((0,a.useState)(null),2),$=R[0],q=R[1],N=O((0,a.useState)(null),2),V=N[0],J=N[1],G=O((0,c.useOrder)(),1)[0],K=O((0,s.useApi)(),1)[0],Q=O((0,a.useState)({}),2),Z=Q[0],X=Q[1],ee=new RegExp(/^[A-Za-z0-9\s]+$/g),te=function(){var t,n=(t=o.default.mark((function t(n){var a,l,s,c,f,y,h,O,j,S,E,_,A,T,D,B,L,Y,W,H,R,q,N,J,Q,te,ne,re,oe;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(b(b({},k),{},{loading:!0})),S={location:P?"".concat(P.lat,",").concat(P.lng):"".concat(null===(a=G.options)||void 0===a||null===(l=a.address)||void 0===l||null===(s=l.location)||void 0===s?void 0:s.lat,",").concat(null===(c=G.options)||void 0===c||null===(f=c.address)||void 0===f||null===(y=f.location)||void 0===y?void 0:y.lng),type:u||(null===(h=G.options)||void 0===h?void 0:h.type)||1},$&&(S=b(b({},S),{},{orderBy:$})),p||d||(E={page:n?1:M.currentPage+1,page_size:M.pageSize},S=b(b({},S),E)),(null===(O=G.options)||void 0===O?void 0:O.moment)&&(o=null===(j=G.options)||void 0===j?void 0:j.moment,ae="YYYY-MM-DD HH:mm:ss",i.default.utc(o,ae).format(ae)===o)&&(A=i.default.utc(null===(_=G.options)||void 0===_?void 0:_.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),S.timestamp=A),T=null,D=[],(r||U)&&D.push({attribute:"types",conditions:[{attribute:"id",value:r||U}]}),w&&D.push({attribute:"featured",value:!0}),z&&(1===(null===(B=G.options)||void 0===B?void 0:B.type)&&D.push({attribute:"delivery_time",value:{condition:"<=",value:z}}),2===(null===(L=G.options)||void 0===L?void 0:L.type)&&D.push({attribute:"pickup_time",value:{condition:"<=",value:z}})),V&&D.push({attribute:"delivery_price",value:{condition:"<=",value:V}}),F&&(Y=[],W=ee.test(F),v&&Y.push({attribute:"name",value:{condition:"ilike",value:!W||(null==e?void 0:e.isForceSearch)?"%".concat(F,"%"):encodeURI("%".concat(F,"%"))}}),g&&Y.push({attribute:"description",value:{condition:"ilike",value:!W||(null==e?void 0:e.isForceSearch)?"%".concat(F,"%"):encodeURI("%".concat(F,"%"))}}),D.push({conector:"OR",conditions:Y})),D.length&&(T={conditions:D,conector:"AND"}),H={},Z.businesses=H,X(b({},Z)),R=T?K.businesses().select(C).parameters(S).where(T):K.businesses().select(C).parameters(S),t.next=20,R.get({cancelToken:H});case 20:q=t.sent,N=q.content,J=N.result,Q=N.pagination,p?(te=J.sort((function(e,t){return t.reviews.total-e.reviews.total})),k.businesses=te):d?(ne=J.filter((function(e){return(null==e?void 0:e.offers.length)>0})),k.businesses=ne):k.businesses=n?J:[].concat(m(k.businesses),m(J)),I(b(b({},k),{},{loading:!1})),re=0,Q.current_page!==Q.total_pages&&(oe=Q.total-k.businesses.length,re=oe<Q.page_size?oe:Q.page_size),x(b(b({},M),{},{currentPage:Q.current_page,totalPages:Q.total_pages,totalItems:Q.total,nextPageItems:re})),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&I(b(b({},k),{},{loading:!1,error:[t.t0.message]}));case 34:case"end":return t.stop()}var o,ae}),t,null,[[0,31]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function u(e){h(a,r,o,u,i,"next",e)}function i(e){h(a,r,o,u,i,"throw",e)}u(void 0)}))});return function(e){return n.apply(this,arguments)}}();(0,a.useEffect)((function(){var e=Z.businesses;return function(){e&&e.cancel()}}),[Z.businesses]),(0,a.useEffect)((function(){var e,t;G.loading||!(null===(e=G.options)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.location)&&!P||j||te(!0)}),[JSON.stringify(G.options),U,F,z,$,V]),(0,a.useEffect)((function(){var e,t;G.loading||!(null===(e=G.options)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.location)&&!P||j&&te(!0)}),[JSON.stringify(G.options.moment),JSON.stringify(G.options.address),U,F,z,$,V]),(0,a.useLayoutEffect)((function(){j&&te(!0)}),[_]),(0,a.useEffect)((function(){if(l||f)switch(l){case"category":ne(f);break;case"timeLimit":oe(f);break;case"search":re(f);break;case"orderBy":ae(f);break;case"maxDeliveryFee":ue(f)}}),[l,f]);var ne=function(e){e!==U&&(I(b(b({},k),{},{businesses:[],loading:!0})),B(e))},re=function(e){I(b(b({},k),{},!!e!=!!F?{businesses:[],loading:!0}:{loading:!1})),Y(e)},oe=function(e){I(b(b({},k),{},!!e!=!!z?{businesses:[],loading:!0}:{loading:!1})),H(e)},ae=function(e){I(b(b({},k),{},e!==$?{businesses:[],loading:!0}:{loading:!1})),q(e)},ue=function(e){I(b(b({},k),{},V!==e?{businesses:[],loading:!0}:{loading:!1})),J(e)};return a.default.createElement(a.default.Fragment,null,n&&a.default.createElement(n,y({},e,{businessesList:k,paginationProps:M,searchValue:F,timeLimitValue:z,businessTypeSelected:U,orderByValue:$,maxDeliveryFee:V,getBusinesses:te,handleChangeSearch:re,handleChangeTimeLimit:oe,handleChangeOrderBy:ae,handleBusinessClick:function(e){E&&E(e)},handleChangeBusinessType:ne,handleChangeMaxDeliveryFee:ue})))};t.BusinessList=S,S.propTypes={UIComponent:u.default.elementType,propsToFetch:u.default.arrayOf(u.string),onBusinessClick:u.default.func},S.defaultProps={propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var P=S;t.default=P},545:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessInformation=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=(o=n(3))&&o.__esModule?o:{default:o};function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.googleMapsControls,n=e.business,r=e.optionToShow,o=e.UIComponent,u=s((0,a.useState)(r),2),i=u[0],c=u[1],f=s((0,a.useState)([]),2),d=f[0],p=f[1],y=s((0,a.useState)([]),2),m=y[0],v=y[1],b=s((0,a.useState)({}),2),g=b[0],h=b[1];return(0,a.useEffect)((function(){var e,r,o=null==n||null===(e=n.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),a=null==n||null===(r=n.gallery)||void 0===r?void 0:r.filter((function(e){return e.video})),u={location:null==n?void 0:n.location,address:null==n?void 0:n.address,address_notes:null==n?void 0:n.address_notes,googleMapsControls:t};p(o),v(a),h(u)}),[n]),a.default.createElement(a.default.Fragment,null,o&&a.default.createElement(o,l({},e,{businessSchedule:n.schedule||[],businessPhotos:d||[],businessVideos:m||[],businessLocation:g||{},optionToShow:i,onChangeOption:function(e){c(e)}})))};t.BusinessInformation=f,f.propTypes={UIComponent:u.default.elementType,business:u.default.object,optionToShow:u.default.string,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},f.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var d=f;t.default=d},546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProductsCategories=void 0;var r=a(n(0)),o=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e){var t=e.categories,n=e.onClickCategory,o=e.UIComponent;return r.default.createElement(r.default.Fragment,null,o&&r.default.createElement(o,u({},e,{categories:t,handlerClickCategory:n})))};t.BusinessProductsCategories=i,i.propTypes={UIComponent:o.default.elementType,categories:o.default.arrayOf(o.default.object),beforeComponents:o.default.arrayOf(o.default.elementType),afterComponents:o.default.arrayOf(o.default.elementType),beforeElements:o.default.arrayOf(o.default.element),afterElements:o.default.arrayOf(o.default.element)},i.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var l=i;t.default=l},547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessProductsSearch=void 0;var r=a(n(0)),o=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=function(e){var t=e.onChangeSearch,n=e.UIComponent;return r.default.createElement(r.default.Fragment,null,n&&r.default.createElement(n,u({},e,{handleChangeSearch:t})))};t.BusinessProductsSearch=i,i.propTypes={UIComponent:o.default.elementType,beforeComponents:o.default.arrayOf(o.default.elementType),afterComponents:o.default.arrayOf(o.default.elementType),beforeElements:o.default.arrayOf(o.default.element),afterElements:o.default.arrayOf(o.default.element)},i.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var l=i;t.default=l},548:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessReviews=void 0;var o=s(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=s(n(3)),i=n(16);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.businessId,n=e.reviews,r=e.UIComponent,u=m((0,i.useApi)(),1)[0],l={},s=m((0,a.useState)({reviews:[],loading:!0,error:null}),2),d=s[0],y=s[1],v=m((0,a.useState)(n),2),b=v[0],g=v[1],h=function(){var e,n=(e=o.default.mark((function e(){var n,r,a,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},l.reviews=r,e.next=5,u.businesses(t).select(["reviews"]).get({cancelToken:r});case 5:a=e.sent,i=a.content.result,(s=null==i||null===(n=i.reviews)||void 0===n?void 0:n.reviews).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),g(s),y(p(p({},d),{},{loading:!1,reviews:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y(p(p({},d),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){f(a,r,o,u,i,"next",e)}function i(e){f(a,r,o,u,i,"throw",e)}u(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,a.useEffect)((function(){return n?(n.length&&n.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),y(p(p({},d),{},{loading:!1,reviews:n}))):h(),function(){l.reviews&&l.reviews.cancel()}}),[]),a.default.createElement(a.default.Fragment,null,r&&a.default.createElement(r,c({},e,{reviewsList:d,handleClickOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="all"!==e?b.filter((function(t){return t.total>=e&&t.total<e+1})):b;y(p(p({},d),{},{loading:!1,reviews:t}))}})))};t.BusinessReviews=b,b.propTypes={UIComponent:u.default.elementType,reviews:u.default.arrayOf(u.default.object),businessId:u.default.number,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},b.defaultProps={reviews:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var g=b;t.default=g},549:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessSortControl=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=(o=n(3))&&o.__esModule?o:{default:o};function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.orderType,n=e.sortOptions,r=e.defaultSortOption,o=e.onChangeSortOption,u=e.UIComponent,i=s((0,a.useState)(r),2),c=i[0],f=i[1],d=s((0,a.useState)(n),2),p=d[0],y=d[1];return(0,a.useEffect)((function(){var e="delivery_time"===t?"Pickup time":"Delivery time";y(n.filter((function(t){return t!==e})))}),[t]),a.default.createElement(a.default.Fragment,null,u&&a.default.createElement(u,l({},e,{orderType:t,sortOptions:p,currentOptionSelected:c,onChangeSortOption:function(e){f(e),o&&o(e)}})))};t.BusinessSortControl=f,f.propTypes={UIComponent:u.default.elementType,sortOptions:u.default.arrayOf(u.default.string),defaultSortOption:u.default.string,orderType:u.default.number,onChangeSortOption:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},f.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var d=f;t.default=d},550:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessTypeFilter=void 0;var o=s(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=s(n(3)),i=n(16);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.businessTypes,n=e.onChangeBusinessType,r=e.defaultBusinessType,u=e.UIComponent,l=m((0,i.useApi)(),1)[0],s=m((0,a.useState)(r),2),f=s[0],p=s[1],v=m((0,a.useState)({loading:!0,error:null,types:[],pagination:null}),2),b=v[0],g=v[1],h=function(){var e,t=(e=o.default.mark((function e(){var t,n,r,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(l.root,"/business_types"),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,r=n.error,a=n.result,u=n.pagination,r){e.next=14;break}return a.unshift({id:null,enabled:!0,image:null,name:"All"}),g(d(d({},b),{},{loading:!1,types:a,pagination:u})),e.abrupt("return");case 14:g(d(d({},b),{},{loading:!1,error:a})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),g(d(d({},b),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){y(a,r,o,u,i,"next",e)}function i(e){y(a,r,o,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,a.useEffect)((function(){t?g(d(d({},b),{},{loading:!1,types:t})):h()}),[t]),a.default.createElement(a.default.Fragment,null,u&&a.default.createElement(u,c({},e,{typesState:b,businessTypes:t,currentTypeSelected:f,handleChangeBusinessType:function(e){p(e),n(e)}})))};t.BusinessTypeFilter=b,b.propTypes={UIComponent:u.default.elementType,businessTypes:u.default.arrayOf(u.default.object),defaultBusinessType:u.default.string,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},b.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var g=b;t.default=g},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Cart=void 0;var r=i(n(0)),o=i(n(3)),a=n(27),u=n(55);function i(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t,n=e.cart,o=e.UIComponent,i=e.handleEditProduct,c=s((0,a.useOrder)(),2),f=c[0],d=c[1],p=d.updateProduct,y=d.removeProduct,m=d.clearCart,v=s((0,u.useConfig)(),1)[0],b=(null===(t=v.order)||void 0===t?void 0:t.quantity)||0,g=(v.configs.max_product_amount?parseInt(v.configs.max_product_amount):100)-b;return r.default.createElement(r.default.Fragment,null,o&&r.default.createElement(o,l({},e,{carts:f.carts,orderState:f,clearCart:m,removeProduct:y,changeQuantity:function(e,t){0===t?y(e,n):p({id:e.id,business_id:e.business_id,code:e.code,quantity:t},n)},getProductMax:function(e){var t=e.inventoried?e.stock:g,n=e.quantity+t-e.balance;return n<e.quantity?e.quantity:n},offsetDisabled:function(e){return(e.inventoried?e.stock:g)-(e.balance-e.quantity)},handleEditProduct:i})))};t.Cart=f,f.propTypes={UIComponent:o.default.elementType,handleEditProduct:o.default.func,validationFieldsType:o.default.string};var d=f;t.default=d},595:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BusinessesMap=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=(o=n(3))&&o.__esModule?o:{default:o},i=n(75);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.UIComponent,n=e.businessList,r=e.userLocation,o=e.setErrors,u=e.onBusinessCustomClick,l=c((0,i.useEvent)(),1)[0],f=c((0,a.useState)([]),2),d=f[0],p=f[1];return(0,a.useEffect)((function(){p(n.map((function(e){return{lat:e.location.lat,lng:e.location.lng,icon:e.logo,slug:e.slug}})))}),[n]),a.default.createElement(a.default.Fragment,null,t&&a.default.createElement(t,s({},e,{businessLocations:d,userLocation:r,onBusinessClick:function(e){if(u)return u(e);l.emit("go_to_page",{page:"business",params:{store:e}})},setErrors:o})))};t.BusinessesMap=d,d.propTypes={UIComponent:u.default.elementType,businessList:u.default.array.isRequired,userLocation:u.default.object,setErrors:u.default.func,onBusinessCustomClick:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},d.defaultProps={businessList:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var p=d;t.default=p},605:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Analytics=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=n(75),i=(o=n(3))&&o.__esModule?o:{default:o};function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.trackId,n=e.children,r=s((0,u.useEvent)(),1)[0],o=s((0,a.useState)(!1),2),i=o[0],l=o[1];(0,a.useEffect)((function(){var e;if(t){if(!window.document.getElementById("google-analytics-sdk")){var n=window.document.createElement("script");return n.id="google-analytics-sdk",n.async=!0,n.defer=!0,n.src="https://www.google-analytics.com/analytics.js",n.onload=(null===(e=window)||void 0===e?void 0:e.ga)&&function(){l(!0),window.ga("create",t),window.ga("require","ec"),window.ga("set","page",window.location.pathname),window.ga("send","pageview")},window.document.body.appendChild(n),function(){n.onload=null}}"undefined"!=typeof ga&&l(!0)}}),[t]);var c=function(e){window.ga("set","page",null==e?void 0:e.page),window.ga("send","pageview")},f=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price}),window.ga("ec:setAction","click"),window.ga("send","event","UI","click","add to cart")},d=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price,quantity:e.quantity}),window.ga("ec:setAction","add"),window.ga("send","event","UI","click","add to cart")},p=function(e){window.ga("set","userId",e.id)},y=function(e){var t;window.ga("ec:setAction","purchase",{id:e.id,affiliation:null===(t=e.business)||void 0===t?void 0:t.name,revenue:e.total,tax:e.tax_total,shipping:e.delivery_zone_price})};return(0,a.useEffect)((function(){return console.log("Analytic Ready"),i&&window.ga&&(r.on("change_view",c),r.on("userLogin",p),r.on("product_clicked",f),r.on("product_added",d),r.on("order_placed",y)),function(){i&&window.ga&&(r.off("change_view",c),r.off("userLogin",p),r.off("product_clicked",f),r.off("product_added",d),r.off("order_placed",y))}}),[i]),a.default.createElement(a.default.Fragment,null,n)};t.Analytics=f,f.propTypes={trackId:i.default.string.isRequired},f.defaultProps={};var d=f;t.default=d},606:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppleLogin=void 0;var o=c(n(9)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=c(n(3)),i=n(16),l=n(55);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){m(a,r,o,u,i,"next",e)}function i(e){m(a,r,o,u,i,"throw",e)}u(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t,n=e.UIComponent,r=e.onSuccess,u=e.onFailure,s=e.initParams,c=e.handleButtonAppleLoginClick,d=b((0,i.useApi)(),1)[0],y=b((0,a.useState)({loading:!1,result:{error:!1}}),2),m=y[0],g=y[1],h=b((0,l.useConfig)(),1)[0].configs,O=s||{clientId:null==h||null===(t=h.apple_login_client_id)||void 0===t?void 0:t.value,redirectURI:window.location.origin.includes("localhost")?"https://example-app.com/redirect":window.location.href,response_mode:"form_post",response_type:"code",state:"state",scope:"name email",nonce:"nonce",usePopup:!1};(0,a.useEffect)((function(){return window.addEventListener("AppleIDSignInOnSuccess",(function(e){r(e)})),window.addEventListener("AppleIDSignInOnFailure",(function(e){u(e)})),w(),function(){document.removeEventListener("AppleIDSignInOnSuccess"),document.removeEventListener("AppleIDSignInOnFailure")}}),[]);var w=function(){if(!window.document.getElementById("apple-login")){var e=window.document.createElement("script");e.id="apple-login",e.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",e.async=!0,e.defer=!0,window.document.body.appendChild(e)}},j=function(){var e=v(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return c(t),e.abrupt("return");case 3:return e.prev=3,g(p(p({},m),{},{loading:!0})),e.next=7,fetch("".concat(d.root,"/auth/apple"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t.code})});case 7:n=e.sent,g({result:n.content,loading:!1}),n.content.error?u&&u(n.content.result):r&&r(n.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),g({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=v(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.AppleID.auth.signIn();case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return a.default.createElement(a.default.Fragment,null,n&&a.default.createElement(n,f({},e,{initLoginApple:function(){window.AppleID.auth.init(O),S()},handleAppleLoginClick:j})))};t.AppleLogin=h,h.propTypes={UIComponent:u.default.elementType,createScriptApple:u.default.func,initLoginApple:u.default.func,handleLoginApple:u.default.func,beforeComponents:u.default.arrayOf(u.default.elementType),afterComponents:u.default.arrayOf(u.default.elementType),beforeElements:u.default.arrayOf(u.default.element),afterElements:u.default.arrayOf(u.default.element)},h.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var O=h;t.default=O}}]);